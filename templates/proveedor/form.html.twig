{% extends 'admin.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="/css/form.css">
{% endblock %}

{% block viewer_content %}
<div class="form-container">
    <h2>{{ titulo }}</h2>

        {# === TANTO SI SALE BIEN COMO SI SALE MAL QUEREMOS DAR FEEDBACK AL USUARIO === #}

    {# popups/flashes de error que vienend e addFlash) #}
    {% for tipo, mensajes in app.flashes %}
        {% for mensaje in mensajes %}
            <div class="alert {{ tipo == 'success' ? 'alert-success' : 'alert-error' }}">
                {{ mensaje }}
            </div>
        {% endfor %}
    {% endfor %}

    {# si hay errores (maas de 0) #}
    {% if errores is defined and errores|length > 0 %}
        <div class="alert alert-error">
            <ul>
                {% for error in errores %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}

    {# === FORMULARIO === #}
    <form method="post" novalidate>
        <!-- CIF, de aqui en adelante el asterisco significa obligatorio -->
        <label for="cif">CIF*</label>
        <input type="text" id="cif" name="cif"
               value="{{ proveedor.cif ?? '' }}"
               maxlength="9"
               pattern="[A-Za-z0-9]{1,9}"
               title="El CIF debe tener máximo 9 caracteres"
               required>

        <!-- nombre -->
        <label for="nombre">Nombre*</label>
        <input type="text" id="nombre" name="nombre"
               value="{{ proveedor.nombre ?? '' }}"
               maxlength="255"
               required>

        <!-- correo_electronico -->
        <label for="correo">Correo electrónico*</label>
        <input type="email" id="correo" name="correo"
               value="{{ proveedor.correoElectronico ?? '' }}"
               maxlength="255"
               required>
        {% if errors is defined and errors.correo is defined %}
            <p class="error-message">{{ errors.correo }}</p>
        {% endif %}

        <!-- telefono -->
        <label for="telefono">Teléfono*</label>
        <input type="text" id="telefono" name="telefono"
               value="{{ proveedor.telefono ?? '' }}"
               maxlength="20"
               required>

        <!-- telefono_2 opcional -->
        <label for="telefono2">Teléfono 2</label>
        <input type="text" id="telefono2" name="telefono2"
               value="{{ proveedor.telefono2 ?? '' }}"
               maxlength="20">

        <!-- tipo_proveedor -->
        <label for="tipo_proveedor">Tipo de proveedor*</label>
        <select id="tipo_proveedor" name="tipo_proveedor" required>
            <option value="">Selecciona un tipo</option>
            <option value="Hotel" {% if proveedor.tipoProveedor == 'Hotel' %}selected{% endif %}>Hotel</option>
            <option value="Crucero" {% if proveedor.tipoProveedor == 'Crucero' %}selected{% endif %}>Crucero</option>
            <option value="Estación de esquí" {% if proveedor.tipoProveedor == 'Estación de esquí' %}selected{% endif %}>Estación de esquí</option>
            <option value="Parque temático" {% if proveedor.tipoProveedor == 'Parque temático' %}selected{% endif %}>Parque temático</option>
        </select>

        <!-- Check activo -->
        <div class="form-check">
            <input
                type="checkbox"
                id="activo"
                name="activo"
                class="form-check-input"
                {% if (proveedor is defined and proveedor.activo) or (accion is defined and accion == 'nuevo') %}
                    checked
                {% endif %}
            >
            <label class="form-check-label" for="activo">Activo</label>
        </div>

        <!-- Botones -->
        <div class="btn-container">
            <button type="submit">
                {% if accion == 'editar' %}
                    Guardar cambios
                {% else %}
                    Crear proveedor
                {% endif %}
            </button>
            <a href="{{ path('app_proveedores') }}" class="btn-cancel">Cancelar</a>
        </div>
    </form>
</div>
{% endblock %}
